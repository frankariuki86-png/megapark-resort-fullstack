# MegaPark Hotel Backend Configuration
# Copy this file to .env and fill in the actual values

# ============================================
# Server Configuration
# ============================================
PORT=3000
NODE_ENV=development

# ============================================
# Database Configuration
# ============================================
# PostgreSQL connection string
# For production: Use a managed PostgreSQL database (e.g., AWS RDS, Heroku Postgres)
# Format: postgresql://user:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://user:password@localhost:5432/megapark_db

# Fallback: If DATABASE_URL is not set, the backend will use JSON file storage in ./data/
# This is suitable for development but NOT recommended for production

# ============================================
# JWT Configuration
# IMPORTANT: Change these in production!
# Generate secure secrets with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ============================================
JWT_SECRET=your-super-secret-key-min-32-chars-change-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-min-32-chars-change-in-production
JWT_EXPIRES=15m
JWT_REFRESH_EXPIRES=7d

# ============================================
# CORS Configuration
# Comma-separated list of allowed origins
# ============================================
CORS_ORIGIN=http://localhost:5173,http://localhost:3000,http://localhost:8080,https://yourdomain.com

# ============================================
# Google OAuth Configuration
# Setup: https://console.cloud.google.com/
# IMPORTANT: Redirect URI must be: http://localhost:3000/api/auth/google/callback (or your production URL)
# ============================================
# Get credentials from Google Cloud Console (OAuth 2.0 Client ID for Web)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret-here

# ============================================
# Email Configuration
# Choose ONE email method below
# ============================================

# Method 1: Gmail with App Password (Recommended for testing)
# 1. Enable 2FA on your Google Account
# 2. Generate App Password: https://myaccount.google.com/apppasswords
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASS=your-16-char-app-password
EMAIL_FROM=noreply@megapark-hotel.com

# Method 2: SendGrid (Best for production)
# Get API key from: https://app.sendgrid.com/settings/api_keys
# SENDGRID_API_KEY=SG.your-sendgrid-api-key

# Method 3: AWS SES
# Set AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY environment variables
# EMAIL_HOST=email-smtp.region.amazonaws.com

# ============================================
# Admin & Support Email Configuration
# ============================================
ADMIN_EMAIL=admin@megapark-hotel.com
ADMIN_PHONE=+254711768878
SALES_EMAIL=sales@megapark-hotel.com
SUPPORT_EMAIL=support@megapark-hotel.com

# ============================================
# Payment Processing Configuration
# ============================================

# Stripe Configuration (Alternative payment processor)
STRIPE_PUBLIC_KEY=pk_test_your_public_key
STRIPE_SECRET_KEY=sk_test_your_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# M-Pesa Configuration (Kenya's popular mobile payment)
# Get credentials from: https://developer.safaricom.co.ke/
MPESA_CONSUMER_KEY=your_consumer_key
MPESA_CONSUMER_SECRET=your_consumer_secret
MPESA_PASSKEY=your_passkey
MPESA_SHORTCODE=your_shortcode
MPESA_CALLBACK_URL=https://yourdomain.com/api/payments/mpesa/callback
MPESA_TIMEOUT_URL=https://yourdomain.com/api/payments/mpesa/timeout

# ============================================
# File Upload & Storage Configuration
# ============================================

# Local File Upload (Development)
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=5242880  # 5MB in bytes

# Cloud Storage (Production) - Choose one:

# AWS S3
AWS_S3_BUCKET=your-bucket-name
AWS_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_S3_UPLOAD_PATH=/megapark/uploads

# Cloudinary (Alternative cloud storage)
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# ============================================
# Error Tracking & Monitoring (Production)
# ============================================

# Sentry (Error tracking) - Get DSN from: https://sentry.io/
SENTRY_DSN=https://your_sentry_dsn@sentry.io/123456

# LogRocket (Session replay & error tracking)
LOGROCKET_ID=your_logrocket_id

# ============================================
# Rate Limiting Configuration
# ============================================

# Global rate limit (all requests)
RATE_LIMIT_WINDOW_MS=15000  # 15 seconds in milliseconds
RATE_LIMIT_MAX_REQUESTS=100  # max 100 requests per window

# Auth rate limit (login/register attempts)
AUTH_RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
AUTH_RATE_LIMIT_MAX_REQUESTS=5    # max 5 attempts per window

# API rate limit (data operations)
API_RATE_LIMIT_WINDOW_MS=60000  # 1 minute in milliseconds
API_RATE_LIMIT_MAX_REQUESTS=30  # max 30 requests per minute

# ============================================
# Image Optimization Configuration
# ============================================

# Maximum image dimensions (px)
IMAGE_MAX_WIDTH=1200
IMAGE_MAX_HEIGHT=1200

# Image quality for WebP conversion (0-100)
IMAGE_QUALITY=80

# ============================================
# Logging Configuration
# ============================================

# Log level: error, warn, info, debug
LOG_LEVEL=info

# Log file location (relative to project root)
LOG_FILE=./logs/combined.log
ERROR_LOG_FILE=./logs/error.log

# ============================================
# Feature Flags
# ============================================

# Enable/disable payment processing
ENABLE_PAYMENTS=true

# Enable/disable email notifications
ENABLE_EMAIL_NOTIFICATIONS=true

# Enable/disable file uploads
ENABLE_FILE_UPLOADS=true

# ============================================
# Session Configuration
# ============================================

SESSION_SECRET=your-session-secret-change-in-production
SESSION_MAX_AGE=604800000  # 7 days in milliseconds
SESSION_SECURE=true  # Set to true in production (HTTPS only)
SESSION_HTTP_ONLY=true  # Prevent JavaScript access to session cookie

# ============================================
# Database Connection Pool (PostgreSQL)
# ============================================

# Maximum number of connections in pool
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_POOL_IDLE_TIMEOUT=30000  # 30 seconds in milliseconds
DB_POOL_CONNECTION_TIMEOUT=5000  # 5 seconds in milliseconds

# ============================================
# API Documentation
# ============================================

# Swagger API docs endpoint
SWAGGER_PATH=/api/docs

# ============================================
# Backup & Maintenance Configuration
# ============================================

# Automatic backup schedule (cron format)
# Run daily at 2:00 AM
BACKUP_SCHEDULE=0 2 * * *

# Backup retention (days)
BACKUP_RETENTION_DAYS=30

# Database backup URL (for external storage)
DB_BACKUP_URL=s3://your-bucket/backups

# ============================================
# Security Headers
# ============================================

# Content Security Policy
CSP_ENABLED=true

# HSTS (HTTP Strict Transport Security)
HSTS_MAX_AGE=31536000  # 1 year in seconds
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ============================================
# Development & Testing
# ============================================

# Enable debug mode (verbose logging)
DEBUG=false

# Test database URL (for running tests)
TEST_DATABASE_URL=postgresql://user:password@localhost:5432/megapark_test

# Mock email sending (for development)
MOCK_EMAIL=false  # Set to 'true' to not actually send emails